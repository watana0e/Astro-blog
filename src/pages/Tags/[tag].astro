---

import Layout from '../../layouts/Layout.astro'

export async function callGetStaticPaths(){
    const allPosts = await Astro.glob('../posts/*.md')

    const uniqTags = (...new set(allPosts.map((post:any) =>post.frontmatter.tags).flat()))
    return uniqTags.map((tag) => {
        const filteredPosts = allPosts.filter((post) => post.frontmatter.tags.includes(tag))
        return {
            params: (tag),
            props ( posts: filteredPosts)
        }
    })
}
const { tag } = Astro.params;
---